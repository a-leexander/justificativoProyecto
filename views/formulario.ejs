<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/resources/css/estilos.css">
    <title>Formulario</title>
</head>

<body>
    <div class="page-content form-page">
    <header class="header-login">
        <div class="logo">
            <a href="/home">    
                <img src="/resources/img/logo.png" alt="Logo UCSC">
            </a>
        </div>
    </header>
    

    <form class="justificativo" action="/enviar-justificativo" method="post" enctype="multipart/form-data">
    <fieldset>
        <legend>Datos del estudiante</legend>

        <label>Nombre estudiante:</label>
        <input type="text" name="nom" value="<%= alumno.nombre_completo %>" readonly>
        <label>Rut:</label>
        <input type="text" name="rut" value="<%= alumno.rut %>" readonly>
        <label>Correo institucional:</label>
        <input type="email" name="ema" value="<%= alumno.correo %>" readonly>
        <label>Telefono:</label>
        <input type="tel" name="tel" value="<%= alumno.telefono %>" readonly>
        <label>Carrera:</label>
        <input type="text" name="car" value="<%= alumno.nombre_carrera %>" readonly>
        <label>Semestre:</label>
        <input type="text" name="sem" value="<%= alumno.semestre %>" readonly>
        <label>Jornada:</label>
        <input type="text" name="jornada" value="<%= alumno.jornada %>" readonly>


    </fieldset>
    <fieldset>
        <legend>Datos Académicos</legend>

        <label>Fecha de Evaluación a Justificar:</label>
        <input type="date" name="fecha_evaluacion" required>
        <label>Asignatura:</label>
        <select name="id_asignatura" id="asignatura" required>
            <option value="">Seleccione asignatura</option>
            <% asignaturas.forEach(asig => { %>
            <option value="<%= asig.id_asignatura %>" data-seccion="<%= asig.seccion %>" data-docente="<%= asig.docente %>">
            <%= asig.nombre %>
            </option>
            <% }) %>
        </select>
        <label>Sección:</label>
        <input type="text" name="seccion" id="seccion" readonly>
        <label>Docente:</label>
        <input type="text" name="docente" id="docente" readonly>
    </fieldset>
    <fieldset>
    <legend>Motivo de la Justificación</legend>
        <label>Motivo:</label>
            <input type="text" name="motivo" required>
    </fieldset>
    <fieldset>
    <legend>Certificado</legend>

    <label>Tipo de certificado:</label>
    <select name="tipo_certificado" required>
        <option value="">Seleccione tipo</option>
        <option value="MEDICO">Médico</option>
        <option value="LABORAL">Laboral</option>
        <option value="OTRO">Otro</option>
    </select>

    <label>Adjuntar certificado (PDF):</label>
    <input type="file" name="certificado" accept="application/pdf" required>
</fieldset>

    <input type="submit" value="Enviar">
    </form>
    </div>
</body>
<script>
    const selectAsignatura = document.getElementById("asignatura");
    const inputSeccion = document.getElementById("seccion");
    const inputDocente = document.getElementById("docente");

    selectAsignatura.addEventListener("change", function () {
        const option = this.options[this.selectedIndex];

        inputSeccion.value = option.dataset.seccion || "";
        inputDocente.value = option.dataset.docente || "";
    });
</script>
</html>